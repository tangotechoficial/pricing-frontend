<!-- Navigation Bar -->
<navegacion></navegacion>
<ngx-spinner></ngx-spinner>
<div class="background" infiniteScroll
[infiniteScrollDistance]="2"
[infiniteScrollThrottle]="50"
(scrolled)="scroll()">
    <div class="container col-10 main-container">
      <div class="container-header col-12">
        <div class="row col-9 p-4">
          <button type="button" class="btn bg-standard" (click)="showFilterModal()" ><i
                  class="fas fa-filter btn-filter-color"></i>&nbsp;Filtro</button>
          <filter-tag [filter]="filter" (updateFilter)="setFilter($event)"></filter-tag>
        </div>
        <div class="container col-3 page-tittle">
          <h2>DADOS MESTRES</h2>
        </div>
      </div>
        <nav>
          <div class="nav nav-tabs" id="tabs" role="tablist">
              <a class="nav-item nav-link active" data-toggle="tab" id="nav-composcao-preco" href="#tab-composicao-preco" role="tab">Composição de Preço</a>
              <a class="nav-item nav-link" data-toggle="tab" id="nav-verba" href="#tab-verba" role="tab">Verba</a>
          </div>
        </nav>
        <div class="tab-content">
            <div class="tab-pane container-tab custom-scrollbar-css fade show active" id="tab-composicao-preco" role="tabpanel" aria-labelledby="nav-composicao-preco">
                <table class="table price-composition-table table-fixed" id="priceComposition">
                    <thead>
                      <tr class="table-head">
                          <th class="th-center table-head-row">CÓD. PRODUTO</th>
                          <th></th>
                          <th class="th-center table-head-row">CÓD. FILIAL EXP.</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">CÓD. FILIAL FAT.</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">DATA</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">UF</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">TIPO REGIÃO</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">MARGEM BRUTA</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">VERBA</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">FUNDING</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">REBATE</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">ICMS</th>
                          <th></th>
                          <th class="th-center table-head-row">PIS COFINS</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">DEVOLUÇÃO</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">PREÇO ALVO</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">FLEXÍVEL</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">ST</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">BENEFÍCIO</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">COMPLEMENTO</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">PREÇO BASE</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">CÓD. REGIÃO</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">RELACIONAMENTO</th>
                          <th></th>
                          <th class="th-center table-head-row" scope="col">TIPO CÁLCULO PREÇO</th>
                          <th></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of masterDataPriceComposition|filter:filter:true">
                          <td>{{item.CODPRD}}</td>
                          <td></td>
                          <td>{{item.CODFILEPD}}</td>
                          <td></td>
                          <td>{{item.CODFILFAT}}</td>
                          <td></td>
                          <td>{{item.DATREF.split(" ")[0]}}</td>
                          <td></td>
                          <td>{{item.CODESTUNI}}</td>
                          <td></td>
                          <td>{{item.TIPEDEREG}}</td>
                          <td></td>
                          <td>{{item.VLRMRGBRT}}</td>
                          <td></td>
                          <td>{{item.VLRVBA}}</td>
                          <td></td>
                          <td>{{item.VLRFND}}</td>
                          <td></td>
                          <td>{{item.VLRFNDRBTITE}}</td>
                          <td></td>
                          <td>{{item.VLRICM}}</td>
                          <td></td>
                          <td>{{item.VLRPIS}}</td>
                          <td></td>
                          <td>{{item.VLRDVL}}</td>
                          <td></td>
                          <td>{{item.VLRUNTPCOALV}}</td>
                          <td></td>
                          <td>{{item.VLRFLXCNS}}</td>
                          <td></td>
                          <td>{{item.VLRCSTCAL}}</td>
                          <td></td>
                          <td>{{item.VLRBNF}}</td>
                          <td></td>
                          <td>{{item.VLRCPLCSTPCO}}</td>
                          <td></td>
                          <td>{{item.VLRPCOBSEMER}}</td>
                          <td></td>
                          <td>{{item.CODREGPCO}}</td>
                          <td></td>
                          <td>{{item.NUMRLCCIDGIR}}</td>
                          <td></td>
                          <td>{{item.TIPCALUTZPCOLIQ}}</td>
                          <td></td>
                      </tr>
                    </tbody>
                </table>
            </div>
            <div class="tab-pane container-tab custom-scrollbar-css" id="tab-verba" role="tabpanel" aria-labelledby="nav-verba">

                <table class="table" id="verbaInfo">
                    <tr class="table-head">
                        <th></th>
                        <th class="th-center table-head-row">DATA</th>
                        <th></th>
                        <th class="th-center table-head-row">CÓD. PRODUTO</th>
                        <th></th>
                        <th class="th-center table-head-row" scope="col">CÓD. FILIAL EXPEDIÇÃO</th>
                        <th></th>
                        <th class="th-center table-head-row" scope="col">VALOR PREÇO SALDO</th>
                        <th></th>
                        <th class="th-center table-head-row" scope="col">VALOR PREÇO CRÉDITO</th>
                        <th></th>
                        <th class="th-center table-head-row" scope="col">VALOR PREÇO DÉBITO</th>
                        <th></th>
                        <th class="th-center table-head-row" scope="col">VALOR MARGEM SALDO</th>
                        <th></th>
                        <th class="th-center table-head-row" scope="col">VALOR MARGEM CRÉDITO</th>
                        <th></th>
                        <th class="th-center table-head-row" scope="col">VALOR MARGEM DÉBITO</th>
                    </tr>
                    <tr *ngFor="let item of masterDataMoney|filter:filter:true">
                        <td></td>
                        <td>{{item.DATREF}}</td>
                        <td></td>
                        <td>{{item.CODPRD}}</td>
                        <td></td>
                        <td>{{item.CODFILEPD}}</td>
                        <td></td>
                        <td>{{item.VLRSLDPCOMESANT || '0.00'}}</td>
                        <td></td>
                        <td>{{item.VLRCRDPCO || '0.00'}}</td>
                        <td></td>
                        <td>{{item.VLRDBTPCO || '0.00'}}</td>
                        <td></td>
                        <td>{{item.VLRSLDMRGMESANT || '0.00'}}</td>
                        <td></td>
                        <td>{{item.VLRCRDMRG || '0.00'}}</td>
                        <td></td>
                        <td>{{item.VLRDBTMRG || '0.00'}}</td>
                    </tr>
                </table>
            </div>
        </div>

    </div>
</div>
<filter-modal filterParentScreen="Dados Mestre" (update)="isSubmitted" (updateFilter)="setFilter($event)" *ngIf="!loading" [data]="masterDataPriceComposition"></filter-modal>
